(this["webpackJsonpbook-shelf"]=this["webpackJsonpbook-shelf"]||[]).push([[0],{51:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){"use strict";n.r(t);var c=n(2),o=n(0),a=n.n(o),r=n(20),i=n.n(r),s=(n(51),n(44)),j=n(11),u=n(18),b=n(6),d=n(43),l=n(65),O=n(67),h=n(66),f=n(42),x=n(63),p=n(38);function k(){var e=Object(o.useState)(""),t=Object(j.a)(e,2),n=t[0],a=t[1],r=Object(b.k)();return Object(c.jsxs)(l.a,{bg:"dark",variant:"dark",expand:"lg",children:[Object(c.jsx)(p.LinkContainer,{to:"/",children:Object(c.jsx)(l.a.Brand,{children:"Lista de leituras"})}),Object(c.jsx)(l.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(c.jsxs)(l.a.Collapse,{id:"basic-navbar-nav",children:[Object(c.jsx)(O.a,{className:"mr-auto"}),Object(c.jsxs)(h.a,{inline:!0,onSubmit:function(e){e.preventDefault(),r.push("/search/".concat(n)),a("")},children:[Object(c.jsx)(f.a,{type:"text",placeholder:"Search",className:"mr-sm-2",value:n,onChange:function(e){a(e.target.value)}}),Object(c.jsx)(u.Link,{to:"/search/".concat(n),children:Object(c.jsx)(x.a,{variant:"outline-success",disabled:!n,onClick:function(){a("")},children:"Search"})})]})]})]})}var v=n(68),g=n(64),B=n(8),m=n(29),y=n(26),S="https://reactnd-books-api.udacity.com",R=localStorage.token;R||(R=localStorage.token=Math.random().toString(36).substr(-8));var T={Accept:"application/json",Authorization:R};function C(e){var t=e.book,n=e.currentBook,a=e.updateOneBook,r=Object(o.useState)(""),i=Object(j.a)(r,2),s=i[0],u=i[1],b=Object(o.useState)(!1),d=Object(j.a)(b,2),l=d[0],O=d[1],h=Object(o.useState)(!1),f=Object(j.a)(h,2),x=f[0],p=f[1],k=Object(o.useState)(!1),v=Object(j.a)(k,2),g=v[0],R=v[1],C=Object(o.useState)(!1),L=Object(j.a)(C,2),F=L[0],N=L[1];Object(o.useEffect)((function(){var e;u(n?n.shelf:null!==(e=t.shelf)&&void 0!==e?e:"")}),[n,t.shelf]),Object(o.useEffect)((function(){return""===s?(O(!1),p(!1),void R(!1)):"currentlyReading"===s?(O(!0),p(!1),void R(!1)):"wantToRead"===s?(O(!1),p(!0),void R(!1)):"read"===s?(O(!1),p(!1),void R(!0)):void 0}),[s]);var A=function(e){N(!0),function(e,t){return fetch("".concat(S,"/books/").concat(e.id),{method:"PUT",headers:Object(B.a)(Object(B.a)({},T),{},{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then((function(e){return e.json()}))}(t,e).then((function(n){var c=Object.assign({},t);c.shelf=e,a(c),N(!1)}))};return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)("div",{children:[Object(c.jsx)("button",{type:"button",style:l?Object(B.a)(Object(B.a)({},w.actionButton),w.bookCurrentlyReading):Object(B.a)(Object(B.a)({},w.actionButton),w.greyButton),onClick:function(e){u("currentlyReading"),A("currentlyReading")},disabled:l,title:"Lendo atualmente",children:Object(c.jsx)(m.a,{})}),Object(c.jsx)("button",{type:"button",style:x?Object(B.a)(Object(B.a)({},w.actionButton),w.bookWantToRead):Object(B.a)(Object(B.a)({},w.actionButton),w.greyButton),onClick:function(e){u("wantToRead"),A("wantToRead")},disabled:x,title:"Quero ler",children:Object(c.jsx)(m.a,{})}),Object(c.jsx)("button",{type:"button",style:g?Object(B.a)(Object(B.a)({},w.actionButton),w.bookRead):Object(B.a)(Object(B.a)({},w.actionButton),w.greyButton),onClick:function(e){u("read"),A("read")},disabled:g,title:"Leitura conclu\xedda",children:Object(c.jsx)(m.a,{})})]}),F&&Object(c.jsx)(y.a,{animation:"border"})]})}var w={actionButton:{border:"1px solid #e0e3e9",padding:"5px 10px",margin:"5px 6px 10px",borderRadius:"4px",whiteSpace:"nowrap"},greyButton:{color:"grey"},bookCurrentlyReading:{color:"yellow"},bookWantToRead:{color:"blue"},bookRead:{color:"green"}};function L(e){var t=e.books,n=e.shelf,o=e.currentBooks,a=e.updateOneBook,r=(n?t.filter((function(e){return e.shelf===n})):t).map((function(e){var t=null===o||void 0===o?void 0:o.find((function(t){return t.id===e.id}));return Object(c.jsxs)(v.a,{style:{width:"18rem"},children:[Object(c.jsx)(v.a.Img,{variant:"top",src:e.image,style:{width:"128px",height:"158px"}}),Object(c.jsxs)(v.a.Body,{children:[Object(c.jsx)(v.a.Title,{children:e.title}),Object(c.jsx)(v.a.Text,{children:e.authors})]}),Object(c.jsx)(v.a.Footer,{children:Object(c.jsx)(C,{book:e,currentBook:t,updateOneBook:a})})]},e.id)}));return Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(g.a,{children:r})})}function F(e){var t=e.updateOneBook,n=e.currentBooks;return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("h1",{children:"Lendo atualmente"}),Object(c.jsx)(L,{books:n,shelf:"currentlyReading",updateOneBook:t}),Object(c.jsx)("h1",{children:"Quero ler"}),Object(c.jsx)(L,{books:n,shelf:"wantToRead",updateOneBook:t}),Object(c.jsx)("h1",{children:"Leitura conclu\xedda"}),Object(c.jsx)(L,{books:n,shelf:"read",updateOneBook:t})]})}var N=function(e){return Array.isArray(e)?e.map((function(e){return{id:e.id,title:e.title,authors:e.authors?e.authors.join(", "):"",shelf:e.shelf,image:e.imageLinks.smallThumbnail}})):[]};function A(e){var t=e.currentBooks,n=e.updateOneBook,a=Object(b.m)().criteria,r=Object(o.useState)([]),i=Object(j.a)(r,2),s=i[0],u=i[1],d=Object(o.useState)(!1),l=Object(j.a)(d,2),O=l[0],h=l[1];return Object(o.useEffect)((function(){var e;h(!0),(e=a,fetch("".concat(S,"/search"),{method:"POST",headers:Object(B.a)(Object(B.a)({},T),{},{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then((function(e){return e.json()})).then((function(e){return e.books}))).then((function(e){var t=N(e);u(t),h(!1)}))}),[a,h]),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("h1",{children:"Pesquisa de Livros"}),O?Object(c.jsx)(y.a,{animation:"border"}):0===s.length?Object(c.jsx)("div",{children:"Nenhum livro encontrado"}):Object(c.jsx)(L,{books:s,currentBooks:t,updateOneBook:n})]})}n(59),n(60);var E=function(){var e=Object(o.useState)([]),t=Object(j.a)(e,2),n=t[0],a=t[1];Object(o.useEffect)((function(){fetch("".concat(S,"/books"),{headers:T}).then((function(e){return e.json()})).then((function(e){return e.books})).then((function(e){var t=N(e);a(t)}))}),[]);var r=function(e){var t=n.filter((function(t){return t.id!==e.id}));a([].concat(Object(s.a)(t),[e]))};return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)(u.BrowserRouter,{children:[Object(c.jsx)(k,{}),Object(c.jsx)("div",{className:"App",children:Object(c.jsx)(d.a,{children:Object(c.jsxs)(b.g,{children:[Object(c.jsx)(b.d,{exact:!0,path:"/",render:function(){return Object(c.jsx)(F,{currentBooks:n,updateOneBook:r})}}),Object(c.jsx)(b.d,{exact:!0,path:"/search/:criteria",render:function(){return Object(c.jsx)(A,{currentBooks:n,updateOneBook:r})}}),Object(c.jsx)(b.c,{to:"/"})]})})})]})})},P=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,69)).then((function(t){var n=t.getCLS,c=t.getFID,o=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),c(e),o(e),a(e),r(e)}))};i.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(E,{})}),document.getElementById("root")),P()}},[[61,1,2]]]);
//# sourceMappingURL=main.c67c782b.chunk.js.map